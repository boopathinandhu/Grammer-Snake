<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>English Snake Game</title>
<style>
body{
    margin:0;
    text-align:center;
    font-family:Arial;
    background:linear-gradient(135deg,#0072ff,#00c6ff);
    color:white;
}
canvas{
    background:#001f3f;
    border:4px solid #00ffff;
    margin-top:20px;
}
button{
    padding:10px 20px;
    font-size:16px;
    margin:10px;
}
</style>
</head>
<body>

<h2>üêç English Sentence Snake</h2>

<button onclick="startGame()">Start</button>
<p>Score: <span id="score">0</span></p>

<canvas id="game" width="400" height="400"></canvas>

<p><b>Correct Sentence:</b> <span id="sentence"></span></p>
<p><b>Tamil Meaning:</b> <span id="tamil"></span></p>

<!-- LOAD SENTENCES FIRST -->
<script src="Sentences.js"></script>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let snake = [{x:200,y:200}];
let size = 20;
let dx = size;
let dy = 0;
let words = [];
let currentSentence = [];
let score = 0;
let indexWord = 0;

function startGame(){
    score = 0;
    document.getElementById("score").innerText = score;
    loadSentence();
    setInterval(draw,150);
}

function loadSentence(){
    let random = sentenceData[Math.floor(Math.random()*sentenceData.length)];
    currentSentence = random.english.split(" ");
    document.getElementById("sentence").innerText = random.english;
    document.getElementById("tamil").innerText = random.tamil;

    words = [];
    let shuffled = [...currentSentence].sort(()=>Math.random()-0.5);
    shuffled.forEach(word=>{
        words.push({
            text:word,
            x:Math.floor(Math.random()*18)*size,
            y:Math.floor(Math.random()*18)*size
        });
    });
    indexWord = 0;
}

function draw(){
    ctx.clearRect(0,0,400,400);

    snake[0].x += dx;
    snake[0].y += dy;

    ctx.fillStyle="yellow";
    snake.forEach(part=>{
        ctx.fillRect(part.x,part.y,size,size);
    });

    ctx.fillStyle="red";
    words.forEach(w=>{
        ctx.fillRect(w.x,w.y,size,size);
        ctx.fillStyle="white";
        ctx.fillText(w.text,w.x+2,w.y+15);
        ctx.fillStyle="red";
    });

    checkCollision();
}

function checkCollision(){
    let head = snake[0];
    if(indexWord < currentSentence.length){
        let target = currentSentence[indexWord];
        words.forEach((w,i)=>{
            if(head.x==w.x && head.y==w.y){
                if(w.text===target){
                    words.splice(i,1);
                    indexWord++;
                    score++;
                    document.getElementById("score").innerText = score;
                    speak(w.text);
                    if(indexWord==currentSentence.length){
                        loadSentence();
                    }
                }
            }
        });
    }
}

function speak(word){
    let speech = new SpeechSynthesisUtterance(word);
    speech.lang="en-US";
    speechSynthesis.speak(speech);
}

document.addEventListener("keydown",function(e){
    if(e.key==="ArrowUp"){dx=0;dy=-size;}
    if(e.key==="ArrowDown"){dx=0;dy=size;}
    if(e.key==="ArrowLeft"){dx=-size;dy=0;}
    if(e.key==="ArrowRight"){dx=size;dy=0;}
});
</script>

</body>
</html>
