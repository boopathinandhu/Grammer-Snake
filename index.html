<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>English Learning Snake Game</title>
<style>
body{
    text-align:center;
    background:#0a2a66;
    color:white;
    font-family:Arial;
}
canvas{
    background:#1e3fa3;
    display:block;
    margin:auto;
    border:3px solid white;
}
button,input{
    padding:6px;
    margin:5px;
}
</style>
</head>
<body>

<h2>üêç English Learning Snake</h2>
<div>Level: <span id="level">1</span> | Score: <span id="score">0</span></div>

<canvas id="game" width="400" height="400"></canvas>

<div>
<button onclick="togglePause()">Pause / Resume</button>
</div>

<div>
Speed:
<input type="range" id="speedControl" min="60" max="300" value="180">
</div>

<h3 id="sentenceDisplay"></h3>
<h3 id="tamilDisplay"></h3>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let box=20;
let snake=[{x:9*box,y:10*box}];
let direction="RIGHT";
let food={};
let words=[];
let wordIndex=0;
let score=0;
let level=1;
let correctCount=0;
let paused=false;
let speed=180;
let game;

// ====== DATA ======

const subjects=["He","She","They","Ravi","Meena",
"The boy","The girl","My friend","The teacher","The students"];

const verbs=[
{base:"go",past:"went",present:"going",future:"go",
object:"to school",tPast:"‡Æö‡ØÜ‡Æ©‡Øç‡Æ±‡Ææ‡Æ∞‡Øç",tPres:"‡Æö‡ØÜ‡Æ©‡Øç‡Æ±‡ØÅ ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tFut:"‡Æö‡ØÜ‡Æ≤‡Øç‡Æµ‡Ææ‡Æ∞‡Øç",tObj:"‡Æ™‡Æ≥‡Øç‡Æ≥‡Æø‡Æï‡Øç‡Æï‡ØÅ"},
{base:"eat",past:"ate",present:"eating",future:"eat",
object:"rice",tPast:"‡Æö‡Ææ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡Øç‡Æü‡Ææ‡Æ∞‡Øç",tPres:"‡Æö‡Ææ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡Øç‡Æü‡ØÅ ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tFut:"‡Æö‡Ææ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡ØÅ‡Æµ‡Ææ‡Æ∞‡Øç",tObj:"‡ÆÖ‡Æ∞‡Æø‡Æö‡Æø"},
{base:"play",past:"played",present:"playing",future:"play",
object:"cricket",tPast:"‡Æµ‡Æø‡Æ≥‡Øà‡ÆØ‡Ææ‡Æü‡Æø‡Æ©‡Ææ‡Æ∞‡Øç",tPres:"‡Æµ‡Æø‡Æ≥‡Øà‡ÆØ‡Ææ‡Æü‡Æø‡Æï‡Øç ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tFut:"‡Æµ‡Æø‡Æ≥‡Øà‡ÆØ‡Ææ‡Æü‡ØÅ‡Æµ‡Ææ‡Æ∞‡Øç",tObj:"‡Æï‡Æø‡Æ∞‡Æø‡Æï‡Øç‡Æï‡ØÜ‡Æü‡Øç"},
{base:"read",past:"read",present:"reading",future:"read",
object:"a book",tPast:"‡Æ™‡Æü‡Æø‡Æ§‡Øç‡Æ§‡Ææ‡Æ∞‡Øç",tPres:"‡Æ™‡Æü‡Æø‡Æ§‡Øç‡Æ§‡ØÅ ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tFut:"‡Æ™‡Æü‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡Æ∞‡Øç",tObj:"‡Æí‡Æ∞‡ØÅ ‡Æ™‡ØÅ‡Æ§‡Øç‡Æ§‡Æï‡ÆÆ‡Øç"},
{base:"write",past:"wrote",present:"writing",future:"write",
object:"a letter",tPast:"‡Æé‡Æ¥‡ØÅ‡Æ§‡Æø‡ÆØ‡Ææ‡Æ∞‡Øç",tPres:"‡Æé‡Æ¥‡ØÅ‡Æ§‡Æø ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tFut:"‡Æé‡Æ¥‡ØÅ‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ∞‡Øç",tObj:"‡Æí‡Æ∞‡ØÅ ‡Æï‡Æü‡Æø‡Æ§‡ÆÆ‡Øç"},
{base:"buy",past:"bought",present:"buying",future:"buy",
object:"a pen",tPast:"‡Æµ‡Ææ‡Æô‡Øç‡Æï‡Æø‡Æ©‡Ææ‡Æ∞‡Øç",tPres:"‡Æµ‡Ææ‡Æô‡Øç‡Æï‡Æø‡Æï‡Øç ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tFut:"‡Æµ‡Ææ‡Æô‡Øç‡Æï‡ØÅ‡Æµ‡Ææ‡Æ∞‡Øç",tObj:"‡Æí‡Æ∞‡ØÅ ‡Æ™‡Øá‡Æ©‡Ææ"},
{base:"watch",past:"watched",present:"watching",future:"watch",
object:"a movie",tPast:"‡Æ™‡Ææ‡Æ∞‡Øç‡Æ§‡Øç‡Æ§‡Ææ‡Æ∞‡Øç",tPres:"‡Æ™‡Ææ‡Æ∞‡Øç‡Æ§‡Øç‡Æ§‡ØÅ ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tFut:"‡Æ™‡Ææ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Ææ‡Æ∞‡Øç",tObj:"‡Æí‡Æ∞‡ØÅ ‡Æ§‡Æø‡Æ∞‡Øà‡Æ™‡Øç‡Æ™‡Æü‡ÆÆ‡Øç"}
];

const times=["","yesterday","last night","in the morning","at home"];

// ====== GENERATE SENTENCE ======

function generateSentence(){
let s=subjects[Math.floor(Math.random()*subjects.length)];
let v=verbs[Math.floor(Math.random()*verbs.length)];
let t=times[Math.floor(Math.random()*times.length)];

let english="",tamil="";

if(level===1){
english=`${s} ${v.past} ${v.object} ${t}`;
tamil=`${s} ${v.tObj} ${v.tPast}`;
}
if(level===2){
english=`${s} is ${v.present} ${v.object} ${t}`;
tamil=`${s} ${v.tObj} ${v.tPres}`;
}
if(level===3){
english=`${s} will ${v.future} ${v.object} ${t}`;
tamil=`${s} ${v.tObj} ${v.tFut}`;
}
if(level===4){
english=`${v.object} was ${v.past} by ${s}`;
tamil=`${v.tObj} ${v.tPast} ${s} ‡ÆÆ‡ØÇ‡Æ≤‡ÆÆ‡Øç`;
}
if(level===5){
english=`${s} said that he ${v.past} ${v.object}`;
tamil=`${s} ‡ÆÖ‡Æµ‡Æ∞‡Øç ${v.tObj} ${v.tPast} ‡Æé‡Æ©‡Øç‡Æ±‡ØÅ ‡Æï‡ØÇ‡Æ±‡Æø‡Æ©‡Ææ‡Æ∞‡Øç`;
}
if(level===6){
english=`If ${s} ${v.base}, he will ${v.future} ${v.object}`;
tamil=`${s} ${v.base} ‡Æé‡Æ©‡Øç‡Æ±‡Ææ‡Æ≤‡Øç ${v.tObj} ${v.tFut}`;
}

english=english.replace(/\s+/g," ").trim();

return {sentence:english,tamil:tamil};
}

// ====== START NEW ROUND ======

function newRound(){
let data=generateSentence();
document.getElementById("sentenceDisplay").innerText=data.sentence;
document.getElementById("tamilDisplay").innerText=data.tamil;

words=data.sentence.split(" ");
words=shuffle(words);
wordIndex=0;
placeFood();
}

// ====== SHUFFLE ======
function shuffle(arr){
return arr.sort(()=>Math.random()-0.5);
}

// ====== PLACE FOOD ======
function placeFood(){
food={
x:Math.floor(Math.random()*19+1)*box,
y:Math.floor(Math.random()*19+1)*box
};
}

// ====== DRAW GAME ======
function draw(){
if(paused) return;

ctx.fillStyle="#1e3fa3";
ctx.fillRect(0,0,400,400);

// draw snake
for(let i=0;i<snake.length;i++){
ctx.fillStyle=i==0?"lime":"green";
ctx.fillRect(snake[i].x,snake[i].y,box,box);
}

// draw word
ctx.fillStyle="yellow";
ctx.font="14px Arial";
ctx.fillText(words[wordIndex],food.x+2,food.y+15);

let headX=snake[0].x;
let headY=snake[0].y;

if(direction=="LEFT") headX-=box;
if(direction=="RIGHT") headX+=box;
if(direction=="UP") headY-=box;
if(direction=="DOWN") headY+=box;

// eat word
if(headX==food.x && headY==food.y){

let correctWord=document.getElementById("sentenceDisplay").innerText.split(" ")[wordIndex];

if(words[wordIndex]===correctWord){
speech(words[wordIndex]);
wordIndex++;
score+=10;
document.getElementById("score").innerText=score;

if(wordIndex>=words.length){
correctCount++;
if(correctCount>=3){
level++;
if(level>6) level=6;
correctCount=0;
}
document.getElementById("level").innerText=level;
newRound();
}
}else{
alert("Wrong order!");
location.reload();
}

placeFood();
}else{
snake.pop();
}

let newHead={x:headX,y:headY};
snake.unshift(newHead);

// wall crash
if(headX<0||headY<0||headX>=400||headY>=400){
alert("Game Over");
location.reload();
}
}

// ====== SPEECH ======
function speech(word){
let u=new SpeechSynthesisUtterance(word);
speechSynthesis.speak(u);
}

// ====== CONTROLS ======
document.addEventListener("keydown",e=>{
if(e.keyCode==37) direction="LEFT";
if(e.keyCode==38) direction="UP";
if(e.keyCode==39) direction="RIGHT";
if(e.keyCode==40) direction="DOWN";
});

// ====== PAUSE ======
function togglePause(){
paused=!paused;
}

// ====== SPEED CONTROL ======
document.getElementById("speedControl").addEventListener("input",function(){
speed=this.value;
clearInterval(game);
game=setInterval(draw,speed);
});

// ====== START ======
newRound();
game=setInterval(draw,speed);

</script>
</body>
</html>
