<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grammar Snake</title>

<style>
body{
    text-align:center;
    background:linear-gradient(to bottom,#0d47a1,#1976d2);
    color:white;
    font-family:Arial;
}
canvas{
    background:#001f3f;
    border:4px solid #4fc3f7;
}
button{
    padding:10px 15px;
    font-size:16px;
    margin:5px;
}
.controls button{
    width:60px;
    height:60px;
    font-size:20px;
}
input[type=range]{
    width:200px;
}
</style>
</head>

<body>

<h2>üêç Grammar Snake</h2>

<canvas id="game" width="360" height="360"></canvas>

<p id="levelText">Level: 1</p>
<p id="scoreText">Score: 0</p>

<p><b>Correct Sentence:</b> <span id="sentence"></span></p>
<p><b>Tamil Meaning:</b> <span id="tamil"></span></p>

<div>
<button onclick="togglePause()">‚èØ Pause / Resume</button>
</div>

<div>
<p>Speed Control</p>
<input type="range" min="80" max="300" value="200" id="speedControl">
</div>

<div class="controls">
<br>
<button onclick="setDir('UP')">‚Üë</button><br>
<button onclick="setDir('LEFT')">‚Üê</button>
<button onclick="setDir('DOWN')">‚Üì</button>
<button onclick="setDir('RIGHT')">‚Üí</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

const box=20;
let snake=[{x:9*box,y:9*box}];
let dir="RIGHT";
let words=[];
let wordBlocks=[];
let currentIndex=0;
let score=0;
let level=1;
let sentencesCompleted=0;
let maxPerLevel=3;
let speed=200;
let interval;
let paused=false;

const subjects=["He","She","They","Ravi","Meena"];
const objects=[
 {word:"to school",tamil:"‡Æ™‡Æ≥‡Øç‡Æ≥‡Æø‡Æï‡Øç‡Æï‡ØÅ"},
 {word:"rice",tamil:"‡ÆÖ‡Æ∞‡Æø‡Æö‡Æø"},
 {word:"cricket",tamil:"‡Æï‡Æø‡Æ∞‡Æø‡Æï‡Øç‡Æï‡ØÜ‡Æü‡Øç"},
 {word:"a book",tamil:"‡Æí‡Æ∞‡ØÅ ‡Æ™‡ØÅ‡Æ§‡Øç‡Æ§‡Æï‡ÆÆ‡Øç"}
];

const verbs=[
 {base:"go",past:"went",present:"going",future:"go",
  tamilPast:"‡Æö‡ØÜ‡Æ©‡Øç‡Æ±‡Ææ‡Æ∞‡Øç",tamilPres:"‡Æö‡ØÜ‡Æ©‡Øç‡Æ±‡ØÅ ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tamilFut:"‡Æö‡ØÜ‡Æ≤‡Øç‡Æµ‡Ææ‡Æ∞‡Øç"},
 {base:"eat",past:"ate",present:"eating",future:"eat",
  tamilPast:"‡Æö‡Ææ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡Øç‡Æü‡Ææ‡Æ∞‡Øç",tamilPres:"‡Æö‡Ææ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡Øç‡Æü‡ØÅ ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tamilFut:"‡Æö‡Ææ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡ØÅ‡Æµ‡Ææ‡Æ∞‡Øç"},
 {base:"play",past:"played",present:"playing",future:"play",
  tamilPast:"‡Æµ‡Æø‡Æ≥‡Øà‡ÆØ‡Ææ‡Æü‡Æø‡Æ©‡Ææ‡Æ∞‡Øç",tamilPres:"‡Æµ‡Æø‡Æ≥‡Øà‡ÆØ‡Ææ‡Æü‡Æø‡Æï‡Øç ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Ææ‡Æ∞‡Øç",tamilFut:"‡Æµ‡Æø‡Æ≥‡Øà‡ÆØ‡Ææ‡Æü‡ØÅ‡Æµ‡Ææ‡Æ∞‡Øç"}
];

function generateSentence(){
 let sub=subjects[Math.floor(Math.random()*subjects.length)];
 let verb=verbs[Math.floor(Math.random()*verbs.length)];
 let obj=objects[Math.floor(Math.random()*objects.length)];
 let english="",tamil="";

 if(level===1){
  english=sub+" "+verb.past+" "+obj.word;
  tamil=sub+" "+obj.tamil+" "+verb.tamilPast;
 }
 if(level===2){
  english=sub+" is "+verb.present+" "+obj.word;
  tamil=sub+" "+obj.tamil+" "+verb.tamilPres;
 }
 if(level===3){
  english=sub+" will "+verb.future+" "+obj.word;
  tamil=sub+" "+obj.tamil+" "+verb.tamilFut;
 }
 if(level===4){
  english=obj.word+" was "+verb.past+" by "+sub;
  tamil=obj.tamil+" "+verb.tamilPast+" "+sub+" ‡ÆÆ‡ØÇ‡Æ≤‡ÆÆ‡Øç";
 }
 if(level===5){
  english=sub+" said that he was tired";
  tamil=sub+" ‡ÆÖ‡Æµ‡Æ∞‡Øç ‡Æö‡Øã‡Æ∞‡Øç‡Æµ‡Ææ‡Æï ‡Æá‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Ææ‡Æ∞‡Øç ‡Æé‡Æ©‡Øç‡Æ±‡ØÅ ‡Æï‡ØÇ‡Æ±‡Æø‡Æ©‡Ææ‡Æ∞‡Øç";
 }
 if(level===6){
  english="If he studies he will pass";
  tamil="‡ÆÖ‡Æµ‡Æ∞‡Øç ‡Æ™‡Æü‡Æø‡Æ§‡Øç‡Æ§‡Ææ‡Æ≤‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æö‡Øç‡Æö‡Æø ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æµ‡Ææ‡Æ∞‡Øç";
 }

 return {sentence:english,tamil:tamil};
}

function newSentence(){
 let data=generateSentence();
 words=data.sentence.split(" ");
 document.getElementById("sentence").innerText=data.sentence;
 document.getElementById("tamil").innerText=data.tamil;
 currentIndex=0;
 createWordBlocks();
}

function createWordBlocks(){
 wordBlocks=[];
 let shuffled=[...words].sort(()=>Math.random()-0.5);
 shuffled.forEach(word=>{
  wordBlocks.push({
   word:word,
   x:Math.floor(Math.random()*18)*box,
   y:Math.floor(Math.random()*18)*box
  });
 });
}

function draw(){
 ctx.clearRect(0,0,canvas.width,canvas.height);

 snake.forEach((s,i)=>{
  ctx.fillStyle=i==0?"yellow":"lime";
  ctx.fillRect(s.x,s.y,box,box);
 });

 ctx.fillStyle="red";
 wordBlocks.forEach(w=>{
  ctx.fillRect(w.x,w.y,box,box);
  ctx.fillStyle="white";
  ctx.fillText(w.word,w.x+2,w.y+15);
  ctx.fillStyle="red";
 });
}

function move(){
 if(paused) return;

 let head={...snake[0]};
 if(dir==="UP") head.y-=box;
 if(dir==="DOWN") head.y+=box;
 if(dir==="LEFT") head.x-=box;
 if(dir==="RIGHT") head.x+=box;

 if(head.x<0||head.y<0||head.x>=360||head.y>=360){
  alert("Game Over");
  location.reload();
 }

 snake.unshift(head);

 let correctWord=words[currentIndex];
 let caught=false;

 wordBlocks.forEach((w,i)=>{
  if(head.x===w.x && head.y===w.y){
   if(w.word===correctWord){
    speechSynthesis.speak(new SpeechSynthesisUtterance(w.word));
    currentIndex++;
    wordBlocks.splice(i,1);
    caught=true;
   }else{
    alert("Wrong word! Game Over");
    location.reload();
   }
  }
 });

 if(!caught) snake.pop();

 if(currentIndex===words.length){
  score++;
  sentencesCompleted++;
  document.getElementById("scoreText").innerText="Score: "+score;

  if(sentencesCompleted>=maxPerLevel){
   level++;
   sentencesCompleted=0;
   alert("üî• Level Up! Level "+level);
  }

  document.getElementById("levelText").innerText="Level: "+level;
  snake=[{x:9*box,y:9*box}];
  newSentence();
 }
}

function gameLoop(){
 move();
 draw();
}

function setDir(d){ dir=d; }

function togglePause(){
 paused=!paused;
}

document.getElementById("speedControl").addEventListener("input",function(){
 speed=this.value;
 clearInterval(interval);
 interval=setInterval(gameLoop,speed);
});

document.addEventListener("keydown",e=>{
 if(e.key==="ArrowUp") dir="UP";
 if(e.key==="ArrowDown") dir="DOWN";
 if(e.key==="ArrowLeft") dir="LEFT";
 if(e.key==="ArrowRight") dir="RIGHT";
});

newSentence();
interval=setInterval(gameLoop,speed);

</script>

</body>
</html>
